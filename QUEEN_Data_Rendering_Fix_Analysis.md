# 3DGS QUEEN λ°μ΄ν„° λ λ”λ§ λ¬Έμ  μ›μΈ λ° ν•΄κ²° κ³Όμ • λ¶„μ„

## π“ κ°μ”
μ΄ λ¬Έμ„λ” κΈ°μ΅΄ μΌλ°μ μΈ 3DGS(3D Gaussian Splatting) λ°μ΄ν„°μ—μ„λ” μ •μƒμ μΌλ΅ μ‘λ™ν•λ ν”λ¬κ·ΈμΈμ΄, **QUEEN λ¨λΈλ΅ μ¶”μ¶ν• λ°μ΄ν„°μ—μ„ λ λ”λ§ λ° μƒ‰μƒ μ¤λ¥(κΉ¨μ§, λΉ„μ •μƒμ  μ¶λ ¥ λ“±)λ¥Ό λ°μƒμ‹ν‚¨ μ›μΈ**κ³Ό, μ΄λ¥Ό ν•΄κ²°ν•κΈ° μ„ν•΄ μ§„ν–‰ν•μ…¨λ **μ»¤λ°‹ λ‚΄μ—­(Commit 5, 7, 8)**μ μμ • μ‚¬ν•­μ„ μƒμ„Έν•κ² λ¶„μ„ν•©λ‹λ‹¤.

---

## 1. Commit 5 (`ae515b3`) : μ»¤μ¤ν…€ λ°μ΄ν„° νƒ€μ… νΈν™μ„± λ¬Έμ  ν•΄κ²°
- **μ»¤λ°‹ μ λ©:** `Commit5_QUEENμ—_λ§κ²_ λ³€κ²½ν•λ”_κ³Όμ •μ μ‹μ‘`
- **μμ • νμΌ:** `package/Editor/Utils/PLYFileReader.cs`

### π” λ°κ²¬λ λ¬Έμ  (μ›μΈ)
μ¤λ¦¬μ§€λ„ 3DGS λ¨λΈμ—μ„ μƒμ„±λ `.ply` νμΌμ€ κ° μ •μ (Vertex) μ”μ†μ μ†μ„±(Property)μΌλ΅ μ£Όλ΅ μ‹¤μν•(`float`, `double`)κ³Ό 1λ°”μ΄νΈ λ¬Έμν•(`uchar`)λ§μ„ μ‚¬μ©ν•©λ‹λ‹¤. λ”°λΌμ„ κΈ°μ΅΄ μ λ‹ν‹°μ PLY νμ„(Parser) μ—­μ‹ μ΄ μ„Έ κ°€μ§€ λ°μ΄ν„° νƒ€μ…λ§μ„ κΈ°λ°μΌλ΅ νμΌμ κµ¬μ΅°λ¥Ό κ³„μ‚°ν•λ„λ΅ μ‘μ„±λμ–΄ μμ—μµλ‹λ‹¤.

ν•μ§€λ§ **QUEEN νμ΄ν”„λΌμΈμ—μ„ μ¶”μ¶λ λ°μ΄ν„°λ” `int` (4λ°”μ΄νΈ μ •μν•) μλ£ν•μ„ ν¬ν•¨**ν•κ³  μμ—μµλ‹λ‹¤. μ΄λ” κ° μ λ“¤μ μ‹λ³„μ(`vertex_id` λ“±)λ‚ κµ°μ§‘ν™”(Clustering) μΈλ±μ¤λ¥Ό μ €μ¥ν•κΈ° μ„ν•΄ μ»¤μ¤ν…€μΌλ΅ μ¶”κ°€λ μ†μ„±μ…λ‹λ‹¤. κΈ°μ΅΄ μ½”λ“λ” νμΌ ν—¤λ”μ—μ„ `int` νƒ€μ…μ„ λ§λ‚¬μ„ λ• μ΄λ¥Ό μΈμ‹ν•μ§€ λ»ν•μ—¬ ν¬κΈ°(Size)λ¥Ό 0μΌλ΅ μƒλµν•΄ λ²„λ Έκ³ , μ΄λ΅ μΈν•΄ μ „μ²΄ λ°μ΄ν„°μ λ³΄ν­(Stride) λ°°μ—΄ κ³„μ‚°μ΄ μ™„μ „ν μ–΄κΈ‹λ‚©λ‹λ‹¤. κ·Έ κ²°κ³Ό λ°μ΄ν„°μ μ‹μ‘μ κ³Ό λμ μ΄ μ—‰μΌ νμΌμ„ μ •μƒμ μΌλ΅ μ½μ–΄μ¤μ§€ λ»ν•λ” λ¬Έμ κ°€ λ°μƒν–μµλ‹λ‹¤.

### π’΅ ν•΄κ²° λ‚΄μ©
- νμΌ ν—¤λ” νμ„μ—μ„ `property int [μ΄λ¦„]` ν•μ‹μ μ†μ„±μ„ λ§μ£Όμ³¤μ„ λ•, λ¬΄μ‹ν•μ§€ μ•κ³  `ElementType.Int`λ΅ μ •μƒ μΈμ‹ν•λ„λ΅ λ¶„κΈ°μ μ„ μ¶”κ°€ν–μµλ‹λ‹¤.
- λ‚΄λ¶€ `TypeToSize()` ν•¨μμ— `ElementType.Int`κ°€ μ°¨μ§€ν•λ” λ¨ μ©λ‰μ΄ μ •ν™•ν 4λ°”μ΄νΈ(Byte)μ„μ„ λ…μ‹ν–μµλ‹λ‹¤.
- μ΄λ¥Ό ν†µν•΄ λ°μ΄ν„° νμΌμ΄ ν™•μ¥ μ†μ„±μ„ κ°€μ§€κ³  μλ”λΌλ„ μ›λμ 3D λ°μ΄ν„° μ„μΉ(Position, Rotation λ“±)λ¥Ό λ©”λ¨λ¦¬μ—μ„ μ¤μ°¨ μ—†μ΄ μ •ν™•ν•κ² μ½μ–΄ λ“¤μΌ μ μλ„λ΅ νΈν™μ„±μ„ ν™•λ³΄ν–μµλ‹λ‹¤.

---

## 2. Commit 7 (`492f538`) : λ„¤μ„μ¤νμ΄μ¤ λ° μ¤ν¬λ¦½νΈ μ»΄νμΌ ν™κ²½ μ•μ •ν™”
- **μ»¤λ°‹ μ λ©:** `Commit7_QUEENμ—_λ§κ²_λ³€κ²½μ΄_μ„±κ³µ?`
- **μμ • νμΌ:** `package/Runtime/GaussianSplatRenderer.cs`, `ProjectSettings.asset`, `GSTestScene.unity` λ“±

### π” μμ •λ μ‚¬ν•­κ³Ό λ©μ 
μ•μ„ νμ„λ¥Ό λ―μ–΄κ³ μΉκ³  κµ¬μ΅°λ¥Ό κ°νΈν•λ” κ³Όμ •μ—μ„ μμν•κ² λ°μƒν• μ»΄νμΌ/μ°Έμ΅° μ—λ¬λ‚ μ”¬(Scene) ν…μ¤νΈ ν™κ²½μ„ μ •λΉ„ν• μ»¤λ°‹μ…λ‹λ‹¤. 

### π’΅ ν•΄κ²° λ‚΄μ©
- λ¨νΈν•΄μ§„ ν΄λμ¤ μ°Έμ΅°λ¥Ό λ°”λ΅μ΅κΈ° μ„ν•΄ `ApplyDelta` λ©”μ„λ“μ λ§¤κ°λ³€μλ¥Ό `DeltaFrame frame`μ—μ„ `GaussianSplatAsset.DeltaFrame frame`μΌλ΅ λ…μ‹μ μΌλ΅ μ„ μ–Έν•μ—¬ μ»΄νμΌ μ¤λ¥λ¥Ό κΉ”λ”ν•κ² ν•΄μ†ν–μµλ‹λ‹¤.
- ν”„λ΅μ νΈ μ„Έν… μ „λ°κ³Ό ν…μ¤νΈ λ©μ μ μ λ‹ν‹° μ”¬(Scene) νμΌλ“¤μ΄ λ€κ±° λ³€κ²½λ κ²ƒμΌλ΅ λ³΄μ•„, μƒλ΅ κ³ μΉ μ½”λ“κ°€ μ‹¤μ  λ λ”λ§μ— μ–΄λ μ •λ„ μ μ©λλ”μ§€ ν™•μΈν•κ³  ν…μ¤νΈν•  μ μλ„λ΅ ν™κ²½μ„ μ¬μ„¤μ •ν• μ¤‘μ”ν• μ§•κ²€λ‹¤λ¦¬ μ—­ν• μ„ ν–μµλ‹λ‹¤.

---

## 3. Commit 8 (`c015d11`) : λ©”λ¨λ¦¬ μΉ¨λ²”μΌλ΅ μΈν• μƒ‰μƒ(Color) μ™κ³΅ μ¤λ¥ ν•΄κ²° π (κ°€μ¥ ν•µμ‹¬)
- **μ»¤λ°‹ μ λ©:** `Commit8_μƒ‰μƒ_λ¬Έμ _ν•΄κ²°_μ‹λ„`
- **μμ • νμΌ:** `package/Editor/GaussianSplatAssetCreator.cs`

### π” λ°κ²¬λ λ¬Έμ  (μ›μΈ)
μ„±κ³µμ μΌλ΅ ν¬μΈνΈ(μ )λ“¤μ„ λ΅λ“ν•κ³  ν•νƒλ¥Ό λ λ”λ§ν•λ” λ°κΉμ§€λ” μ„±κ³µν–μΌλ‚, **λ¨λΈμ μƒ‰μƒμ΄ κΈ°κ΄΄ν•κ³  ν™”λ ¤ν•κ² κΉ¨μ§€κ±°λ‚ μ• μ μ—†λ” λ…Έμ΄μ¦ ν•νƒλ΅ λ’¤λ®μ—¬λ²„λ¦¬λ” μ‹¬κ°ν• λ λ”λ§ μ¤λ¥**κ°€ μμ—μµλ‹λ‹¤. μ΄λ” λΉ›μ λ°μ‚¬μ™€ μƒ‰μƒμ„ μ •μν•λ” **SH (Spherical Harmonics) κ³„μμ λ°μ΄ν„° λ¶μΌμΉ**μ—μ„ λΉ„λ΅―λμ—μµλ‹λ‹¤.

- **μ¤λ¦¬μ§€λ„ 3DGS:** ν†µμƒ κµ¬λ©΄ μ΅°ν™” ν•¨μ 3μ°¨μ(Degree 3)λ¥Ό ν™μ©ν•μ—¬ RGB μƒ‰μƒλ³„λ΅ κ°κ° 15κ°, **μ΄ 45κ°**μ μ¶”κ°€ μ—°μ‚° λ°μ΄ν„°(`f_rest_0` ~ `f_rest_44`)λ¥Ό νμΌμ— κ°€μ§€κ³  μμµλ‹λ‹¤.
- **QUEEN λ°μ΄ν„°:** κ²½λ‰ν™”, λ¦¬μ†μ¤ μ μ•½, νΉμ€ νμ΄ν”„λΌμΈ λ³€κ²½μΌλ΅ μΈν•΄ μ°¨μκ°€ λ‚®μ•„μ Έμ„ RGB κµ¬λ¶„ μ—†μ΄ **μ΄ 24κ°**(μΌλ°μ μΌλ΅ 2μ°¨μ μ΅°ν•©)μ λ°μ΄ν„°(`f_rest_0` ~ `f_rest_23`)λ§ κ°€μ§€κ³  μ¶”μ¶λμ—μµλ‹λ‹¤.

κΈ°μ΅΄ λ³€ν™ μ½”λ“λ” `.ply` νμΌ μ•μ— λ°μ΄ν„°κ°€ λ‡ κ°κ°€ λ“¤μ–΄μλ“  μ‹ κ²½ μ“°μ§€ μ•κ³ , **λ¬΄μ΅°κ±΄ 'μ›λ³Έ 3DGS κΈ°μ¤€'μΈ 45κ°μ μ‹¤μ(Float) ν¬κΈ°λ§νΌ λ©”λ¨λ¦¬λ¥Ό κ°•μ  λ³µμ‚¬(`UnsafeUtility.MemCpy`)ν•λ„λ΅ ν•λ“μ½”λ”©**λμ–΄ μμ—μµλ‹λ‹¤.
κ²°κ³Όμ μΌλ΅ QUEEN νμΌμ—λ” λ°μ΄ν„°κ°€ 24κ°λ°–μ— μ—†λ”λ° 45κ°λ¥Ό λ¬΄λ ¥μΌλ΅ κΈμ–΄μ™”κ³ , λ‚¨μ€ 21κ°μ λΉμλ¦¬(`f_rest_24` ~ `f_rest_44`)μ—λ” PC λ©”λ¨λ¦¬ μƒμ—μ„ κµ΄λ¬λ‹¤λ‹λ **μ •μ²΄λ¶λ…μ μ“°λ κΈ°κ°’(Garbage Value)**μ΄ λ¬΄μ‘μ„λ΅ λ³µμ‚¬λμ—μµλ‹λ‹¤. κ²°κµ­ μ λ‹ν‹° GPU λ λ”λ¬κ°€ μ΄ μ“°λ κΈ° λ©”λ¨λ¦¬κ°’λ“¤κΉμ§€ μƒ‰μƒ μ—°μ‚° κ³µμ‹μ— λ°€μ–΄ λ„£μΌλ©΄μ„ μ™„μ „ν μ¤μ—Όλ μƒ‰κ°μ΄ ν™”λ©΄μ— ν‘μ¶λ κ²ƒμ…λ‹λ‹¤.

### π’΅ ν•΄κ²° λ‚΄μ©
- (1) **λ©”λ¨λ¦¬ ν™•λ³΄ λ° μ²­μ†**: λ¨Όμ € `UnsafeUtility.MemClear`λ¥Ό ν™μ©ν•΄ λ©ν‘ λ©”λ¨λ¦¬ κ³µκ°„(45κ°λ¶„) μ „μ²΄λ¥Ό `0.0f`λΌλ” κΉ¨λ—ν• κ°’μΌλ΅ ν¬λ§·(μ΄κΈ°ν™”)ν–μµλ‹λ‹¤.
- (2) **μ‹¤μ΅΄ λ°μ΄ν„°λ§ λ¶€λ¶„ λ³µμ‚¬**: κΈ°μ΅΄ κ°•μ  45κ° λ³µμ‚¬λ¥Ό μ§€μ°κ³ , QUEEN ν”λΌμ΄ νμΌμ΄ μ‹¤μ λ΅ λ³΄μ ν•κ³  μλ” 24κ°(`24 * sizeof(float)`) ν¬κΈ°μ λ°μ΄ν„°κΉμ§€λ§ μ•μ „ν•κ² μλΌλ‚΄μ–΄ λ³µμ‚¬ν–μµλ‹λ‹¤.
- (3) **κ·κ²© μ μ§€**: λ©”λ¨λ¦¬ ν¬μΈν„°λ¥Ό μ΄λ™μ‹ν‚¬ λ•λ” μ—¬μ „ν μ λ‹ν‹° λ λ”λ¬κ°€ μ”κµ¬ν•λ” ν‹€μΈ `15*3` ν¬κΈ°λ§νΌ μ ν”„μ‹ν‚¤λ„λ΅ μ μ§€ν–μµλ‹λ‹¤. μ΄λ ‡κ² ν•λ©΄ λ¶€μ΅±ν• λ’·μλ¦¬ λ°μ΄ν„°λ“¤μ€ μλ™μΌλ΅ `0`μ„ λ¤ μ±„ GPUλ΅ μ•μ „ν•κ² λ„μ–΄κ°€κΈ° λ•λ¬Έμ— ν—λ¬΄λ§Ήλ‘ν• μƒ‰μƒ μ—°μ‚° μ™κ³΅μ„ λ§‰μ„ μ μμµλ‹λ‹¤.
- μ΄ μ½”λ“λ΅ μμ •ν• λ’¤ κ±°μ§“λ§μ²λΌ μƒ‰μƒ κ°’μ΄ μ •μƒμΌλ΅ λμ•„μ™”μµλ‹λ‹¤.

---

## π† κ²°λ΅  λ° μμ
μ„ μ„Έν… κ³Όμ •μ„ ν†µν•΄, μ‘μ„±μλ‹κ»μ„λ” "μΌλ°μ μΈ 3DGSλ§ μ§€μ›ν•λ” ν”λ¬κ·ΈμΈ"μ„ "κ³ μ μ ν¬λ§·μ„ κ°€μ§„ μ»¤μ¤ν…€ QUEEN νμ΄ν”„λΌμΈ"κΉμ§€ λ„“κ² νΈν™μ‹ν‚¬ μ μλ” ν›λ¥­ν• λ²”μ©μ  ν”λ¬κ·ΈμΈ κΈ°λ°μ„ λ‹¤μ§€μ…¨μµλ‹λ‹¤.
- **Commit 5**λ¥Ό ν†µν•΄ λ°μ΄ν„°λ¥Ό ν•κ²¨λ‚΄λ κµ¬μ΅°μ  λΌλ€(μλ£ν•)λ¥Ό νΈν™μ‹μΌ°κ³ ,
- **Commit 8**μ λ›°μ–΄λ‚ μ»΄ν“¨ν„°κµ¬μ΅°μ  μ ‘κ·Ό(λ©”λ¨λ¦¬ ν΄λ¦¬μ–΄, Out of bounds Read νν”Ό)μ„ ν†µν•΄ λ λ”λ§ μ‹κ° ν¨κ³Όλ¥Ό μ •μƒ κ¶¤λ„μ— μ¬λ ¤λ†“μ€ λ¨λ²”μ μΈ ν”„λΌλΈ”λΌ μ†”λΉ™(Problem Solving) μ‚¬λ΅€μ…λ‹λ‹¤.
